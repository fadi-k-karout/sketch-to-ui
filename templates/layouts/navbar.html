{{define "navbar"}} {{if .isLoggedIn }}
<nav
  id="navbar"
  class="navbar bg-base-100/80 backdrop-blur-md shadow-sm sticky z-50 transition-shadow duration-300 hover:shadow-md"
>
  <div class="flex-1">
    <a href="#" class="text-2xl font-bold text-primary flex items-center">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="w-8 h-8 mr-2"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z"
        />
      </svg>
      UI Copilot
    </a>
  </div>

  <label class="toggle text-base-content">
    <input
      type="checkbox"
      x-model="darkMode"
      class="theme-controller"
      value="night"
    />
    <svg
      aria-label="sun"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
    >
      <g
        stroke-linejoin="round"
        stroke-linecap="round"
        stroke-width="2"
        fill="none"
        stroke="currentColor"
      >
        <circle cx="12" cy="12" r="4"></circle>
        <path d="M12 2v2"></path>
        <path d="M12 20v2"></path>
        <path d="m4.93 4.93 1.41 1.41"></path>
        <path d="m17.66 17.66 1.41 1.41"></path>
        <path d="M2 12h2"></path>
        <path d="M20 12h2"></path>
        <path d="m6.34 17.66-1.41 1.41"></path>
        <path d="m19.07 4.93-1.41 1.41"></path>
      </g>
    </svg>

    <svg
      aria-label="moon"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
    >
      <g
        stroke-linejoin="round"
        stroke-linecap="round"
        stroke-width="2"
        fill="none"
        stroke="currentColor"
      >
        <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path>
      </g>
    </svg>
  </label>
  <div class="flex-none gap-2">
    <div class="dropdown dropdown-end">
      <div
        tabindex="0"
        role="button"
        class="flex items-center space-x-2 p-2 rounded-lg hover:bg-base-200 cursor-pointer"
      >
        <div class="avatar">
          <div class="w-10 h-10 rounded-full">
            <img src="/{{ .avatarPath }}" alt="avatar" />
          </div>
        </div>
        <div class="text-sm">
          <div class="font-semibold text-base-content">
            {{.firstName}} {{.lastName}}
          </div>
          <div class="text-xs text-base-content/60">Product Designer</div>
        </div>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5 ml-1"
          viewBox="0 0 20 20"
          fill="currentColor"
        >
          <path
            fill-rule="evenodd"
            d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
            clip-rule="evenodd"
          />
        </svg>
      </div>

      <ul
        tabindex="0"
        class="mt-3 z-[1] p-2 shadow menu menu-sm dropdown-content bg-base-100 rounded-box w-52"
      >
        <li>
          <a
            hx-get="/sketchpad"
            hx-target="#content"
            hx-swap="innerHTML transition:true"
            >Sketchpad</a
          >
        </li>
        <li>
          <a
            hx-get="/components/dashboard"
            hx-target="#content"
            hx-swap="innerHTML transition:true"
          >
            Dashboard
          </a>
        </li>
        <li><a>Settings</a></li>
        <li><a hx-get="/logout" hx-target="#content">Logout</a></li>
      </ul>
    </div>
  </div>
</nav>

{{else}}

<nav
  id="navbar"
  x-data="{ mobileMenuOpen: false }"
  class="bg-base-100/80 backdrop-blur-md shadow-sm sticky top-0 z-50 transition-shadow duration-300 hover:shadow-md"
>
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-20">
      <div class="flex-shrink-0">
        <a href="/#" class="text-2xl font-bold text-primary flex items-center">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-8 h-8 mr-2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z"
            />
          </svg>
          UI Copilot
        </a>
      </div>

      <div class="hidden md:flex items-center space-x-6">
        <a
          href="#features"
          class="hover:text-primary transition-colors duration-300"
          >Features</a
        >
        <a
          href="#how-it-works"
          class="hover:text-primary transition-colors duration-300"
          >How It Works</a
        >
       

        <label class="toggle text-base-content">
          <input
            type="checkbox"
            x-model="darkMode"
            class="theme-controller"
            value="night"
          />
          <svg
            aria-label="sun"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
          >
            <g
              stroke-linejoin="round"
              stroke-linecap="round"
              stroke-width="2"
              fill="none"
              stroke="currentColor"
            >
              <circle cx="12" cy="12" r="4"></circle>
              <path d="M12 2v2"></path>
              <path d="M12 20v2"></path>
              <path d="m4.93 4.93 1.41 1.41"></path>
              <path d="m17.66 17.66 1.41 1.41"></path>
              <path d="M2 12h2"></path>
              <path d="M20 12h2"></path>
              <path d="m6.34 17.66-1.41 1.41"></path>
              <path d="m19.07 4.93-1.41 1.41"></path>
            </g>
          </svg>

          <svg
            aria-label="moon"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
          >
            <g
              stroke-linejoin="round"
              stroke-linecap="round"
              stroke-width="2"
              fill="none"
              stroke="currentColor"
            >
              <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path>
            </g>
          </svg>
        </label>

        <a
          hx-get="/login"
          hx-target="#content"
          hx-swap="innerHTML transition:true"
          class="btn btn-ghost btn-sm"
          >Login</a
        >

        <a
          hx-get="/signup"
          hx-target="#content"
          hx-swap="innerHTML transition:true"
          class="btn btn-primary btn-sm"
          >Sign Up</a
        >
      </div>

      <div class="md:hidden flex items-center">
        <label class="toggle text-base-content">
          <input
            type="checkbox"
            x-model="darkMode"
            class="theme-controller"
            value="night"
          />
          <svg
            aria-label="sun"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
          >
            <g
              stroke-linejoin="round"
              stroke-linecap="round"
              stroke-width="2"
              fill="none"
              stroke="currentColor"
            >
              <circle cx="12" cy="12" r="4"></circle>
              <path d="M12 2v2"></path>
              <path d="M12 20v2"></path>
              <path d="m4.93 4.93 1.41 1.41"></path>
              <path d="m17.66 17.66 1.41 1.41"></path>
              <path d="M2 12h2"></path>
              <path d="M20 12h2"></path>
              <path d="m6.34 17.66-1.41 1.41"></path>
              <path d="m19.07 4.93-1.41 1.41"></path>
            </g>
          </svg>

          <svg
            aria-label="moon"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
          >
            <g
              stroke-linejoin="round"
              stroke-linecap="round"
              stroke-width="2"
              fill="none"
              stroke="currentColor"
            >
              <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path>
            </g>
          </svg>
        </label>
        <button
          @click="mobileMenuOpen = !mobileMenuOpen"
          type="button"
          class="btn btn-ghost"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-6 h-6"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
            />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <div
    x-show="mobileMenuOpen"
    @click.away="mobileMenuOpen = false"
    x-transition:enter="transition ease-out duration-200 origin-top"
    x-transition:enter-start="opacity-0 scale-y-90"
    x-transition:enter-end="opacity-100 scale-y-100"
    x-transition:leave="transition ease-in duration-150 origin-top"
    x-transition:leave-start="opacity-100 scale-y-100"
    x-transition:leave-end="opacity-0 scale-y-90"
    class="md:hidden absolute top-20 inset-x-0 p-2 transition transform"
    style="display: none"
  >
    <div
      class="rounded-lg shadow-xl ring-1 ring-black ring-opacity-5 bg-base-100 divide-y-2 divide-base-300"
    >
      <div class="pt-5 pb-6 px-5 space-y-6">
        <div class="grid grid-cols-1 gap-y-4">
          <a
            href="#features"
            @click="mobileMenuOpen = false"
            class="block px-3 py-2 rounded-md text-base font-medium hover:bg-base-200 hover:text-primary"
            >Features</a
          >
          <a
            href="#how-it-works"
            @click="mobileMenuOpen = false"
            class="block px-3 py-2 rounded-md text-base font-medium hover:bg-base-200 hover:text-primary"
            >How It Works</a
          >
          <a
            href="#pricing"
            @click="mobileMenuOpen = false"
            class="block px-3 py-2 rounded-md text-base font-medium hover:bg-base-200 hover:text-primary"
            >Pricing</a
          >
        </div>
        <div class="mt-6 space-y-2">
          <a
            hx-get="/signup"
            hx-target="#content"
            hx-swap="innerHTML transition:true"
            class="w-full btn btn-primary"
            >Sign Up</a
          >
          <a
            hx-get="/login"
            hx-target="#content"
            hx-swap="innerHTML transition:true"
            class="w-full btn btn-ghost"
            >Login</a
          >
        </div>
      </div>
    </div>
  </div>
</nav>

{{end}}
<script>
  document.body.addEventListener("htmx:afterOnLoad", function (evt) {
    if (evt.detail.xhr.getResponseHeader("HX-Trigger") === "navbarChanged") {
      htmx.ajax("GET", "/navbar", {
        target: "#navbar",
        swap: "outerHTML",
        pushURL: false,
      });
    }
  });
</script>
{{end}}
